---
layout: false
---

<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>
      RockMonkey
    </title>
    <style type="text/css">
      @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i");
      a {
        color: #0992b5; }
        a:focus, a:hover {
          color: #076b84; }
        a.broken {
          color: #e41a00; }
          a.broken::before {
            content: "ðŸ’¥"; }
        a.external::before {
          content: "ðŸ”—"; }

      body .js {
        display: none; }

      body.js .js {
        display: inherit; }

      aside {
        background: #f4f4f4;
        float: right;
        width: 30%; }

      body {
        background: #ffffff;
        color: #0c0408;
        display: flex;
        flex-direction: column;
        margin: 15px;
        align-items: center;
        font-family: 'Open Sans', sans-serif;
        box-sizing: border-box; }
        body > * {
          width: 95%;
          max-width: 980px; }
        body > header, body > footer {
          background: #517438;
          color: #f4f4f4;
          padding: 15px; }
          body > header h1, body > footer h1 {
            margin: 0; }
          body > header a, body > footer a {
            color: #ffffff;
            text-decoration: none; }
            body > header a:focus, body > header a:hover, body > footer a:focus, body > footer a:hover {
              color: #ffffff;
              text-decoration: underline; }
        body > footer {
          display: flex;
          justify-content: space-between;
          align-items: center; }
        body > main {
          pading: 15px 0; }
          body > main header {
            margin: 15px 0; }
            body > main header h2 {
              margin: 0; }
          body > main footer {
            clear: both;
            text-align: center;
            font-size: 80%;
            color: gray;
            padding: 30px 0 15px; }

      img.right {
        float: right;
        margin: 15px 0 15px 15px; }

      img.left {
        float: left;
        margin: 15px 15px 15px 0; }

      img.centre, img.center {
        display: block;
        margin: auto; }

      .button {
        display: inline-block;
        border-radius: 4px;
        border: 1px solid #777;
        margin: 2px;
        background: #ddd; }
        .button:hover {
          background: #ccc;
          border-color: #555; }
        .button a {
          padding: 4px 8px;
          text-decoration: none;
          color: #333; }
          .button a:hover {
            color: #000; }

      .wikigame-shortcodes {
        background: #f5bdbd;
        padding: 15px 25px;
        border: 2px solid #cb1212;
        border-radius: 8px; }

      .randomlink a {
        display: none; }
        .randomlink a:first-child {
          display: inherit; }
    </style>
  </head>
  <body>
    <header>
      <h1><a href="#HomePage">RockMonkey | Archive Edition</a></h1>
    </header>
    <main>
      <p>
        Loading... please wait...
      </p>
    </main>
    <footer>
      <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAMAAABUFvrSAAAA81BMVEW/v7/v7+9fX18PDw8fHx+fn58vLy/f39/Pz89vb2+vr69PT0+Pj4/5+fn9/f1lZWXl5eXOzs7q6urx8fH39/fp6Oi+vr77+/uNjY3j4+PZ2dmnp6fNzc16enr09PTz8/NcXFzy8vJOTk4jIyP19fXd3d3m5uZeXl4MDAw2NjYmJiatra3U1NTFxcXi4uIsKysXFxdVVVX+/v4ZGRkxMTFbW1vIyMi3t7eenp52dnaYmJjs7OyOjo7V1dXe3t7t7e3T09OQkJCLi4vu7u7Ly8tTU1MKCwnh4eHW1taKiorKysrn5+d/f38/Pz/t6uH///8AAADu30gVAAACp0lEQVRIx7XW15IbRwwFUHTunhlSG5WDsyXbCrbknHNYwPf+/9f4oWdnJdeOHlYkHlhFFnlYdRsYtIB7KQj/3UtRiL3U/+AqUncOu2Q9njFhu/nz6RuGvMApXHwYP75/8MVHO4GdJxnbIDK0QPKt00++fHcXsJEhnYcyBfLzW/XOHyRJU9XMqJFRY1RVH+iVJNVIU7XXwI3M7iL5ksl7tw6/JkkqADSD0WAGAEIBSUI5wQHjKiyz65KqVgAuko+f3H3WYQbIAhurW+CAGoKTVdhIK8v5Wf+rd47fv9dhnZAWuBakBTa012VcSXLOjaQHAE/e/uB6h0WGsMDNBPECVtL7NVjJOL9Vab6PCnnz259yj4JkxmADsqHZABOYGaF0bvRIa7Axo09HmJYjDPzwwQ+fLjAHAIkGAIkCAITSHFDiGpzpe2eQDK1gbkA7Obj20jez5Ut+H8zWM+4tdR4xvczw5uzamw1IZpvhYYokaekl2FS1BdIGSZFRlTT1ZOwvFnVk1Hh5xgZg6g3Rw44pcuywQgqEBidwwYCRFUIqEGhQA6LBLoMb6YBCklqHKnP7fLc5ezEf3oA8INOjGZAiIGRx8DMsK/DQQ557PVSUFkgenhw8nOERJnXu3OIaitDgS+1wQrocRmRwF7L1Nrbtg2/mkabCxAVmqGECBhEmVIdoUIMJVuBEjgAgzWxMAFwmr2+OHp2PtCv0GFqFGazAiwRXdYJ2OK7BsHmQz5fJSPobx3eWp9uQycmheBpsQhDx8GQpHaauwS6Tedl2ksn843vfP9/FBskkx1SAkoxk/nVzNO5k57lXnn/62Y23f9/RMkXx8zoNvmB7cvurn3/5+8p189V7hSTVVAFge//gr7u//XPlOly7CW03x0enZ1evU+7x7ran+g9fy+C3KUMteQAAAABJRU5ErkJggg==" alt="CC0 - Public Domain" /></a>
      <a href="#" class="random-page">Random page</a>
      <span>
        <label for="searchBox">Search:</label> <input type="search" id="searchBox" placeholder="Search here!">
      </span>
      <a href="#Help">What is this?</a>
    </footer>

    <script type="text/javascript">
      /* lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.1.4 */
      !function(){var t,l,d,h,c,f,p,y,m,g,x,v,w,k,Q,L,T,S,b,P,E,I,O,e,r,R=function(e){var t=new R.Builder;return t.pipeline.add(R.trimmer,R.stopWordFilter,R.stemmer),t.searchPipeline.add(R.stemmer),e.call(t,t),t.build()};function i(e){var t,r,i,n,s,o,a,u;return e.length<3||("y"==(r=e.substr(0,1))&&(e=r.toUpperCase()+e.substr(1)),a=m,(s=y).test(e)?e=e.replace(s,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=x,(s=g).test(e)?(u=s.exec(e),(s=h).test(u[1])&&(s=v,e=e.replace(s,""))):a.test(e)&&(o=(u=a.exec(e))[1],(a=p).test(o)&&(i=k,n=Q,(a=w).test(e=o)?e+="e":i.test(e)?(s=v,e=e.replace(s,"")):n.test(e)&&(e+="e"))),(s=L).test(e)&&(e=(o=(u=s.exec(e))[1])+"i"),(s=T).test(e)&&(o=(u=s.exec(e))[1],t=u[2],(s=h).test(o)&&(e=o+l[t])),(s=S).test(e)&&(o=(u=s.exec(e))[1],t=u[2],(s=h).test(o)&&(e=o+d[t])),a=P,(s=b).test(e)?(o=(u=s.exec(e))[1],(s=c).test(o)&&(e=o)):a.test(e)&&(o=(u=a.exec(e))[1]+u[2],(a=c).test(o)&&(e=o)),(s=E).test(e)&&(o=(u=s.exec(e))[1],a=f,i=O,((s=c).test(o)||a.test(o)&&!i.test(o))&&(e=o)),a=c,(s=I).test(e)&&a.test(e)&&(s=v,e=e.replace(s,"")),"y"==r&&(e=r.toLowerCase()+e.substr(1))),e}R.version="2.1.4",R.utils={},R.utils.warn=(t=this,function(e){t.console&&console.warn&&console.warn(e)}),R.utils.asString=function(e){return null==e?"":e.toString()},R.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},R.FieldRef.joiner="/",R.FieldRef.fromString=function(e){var t=e.indexOf(R.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var r=e.slice(0,t),t=e.slice(t+1);return new R.FieldRef(t,r,e)},R.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+R.FieldRef.joiner+this.docRef),this._stringValue},R.idf=function(e,t){var r,i=0;for(r in e)"_index"!=r&&(i+=Object.keys(e[r]).length);t=(t-i+.5)/(i+.5);return Math.log(1+Math.abs(t))},R.Token=function(e,t){this.str=e||"",this.metadata=t||{}},R.Token.prototype.toString=function(){return this.str},R.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},R.Token.prototype.clone=function(e){return e=e||function(e){return e},new R.Token(e(this.str,this.metadata),this.metadata)},R.tokenizer=function(e){if(null==e||null==e)return[];if(Array.isArray(e))return e.map(function(e){return new R.Token(R.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),r=t.length,i=[],n=0,s=0;n<=r;n++){var o=n-s;!t.charAt(n).match(R.tokenizer.separator)&&n!=r||(0<o&&i.push(new R.Token(t.slice(s,n),{position:[s,o],index:i.length})),s=n+1)}return i},R.tokenizer.separator=/[\s\-]+/,R.Pipeline=function(){this._stack=[]},R.Pipeline.registeredFunctions=Object.create(null),R.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&R.utils.warn("Overwriting existing registered function: "+t),e.label=t,R.Pipeline.registeredFunctions[e.label]=e},R.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||R.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},R.Pipeline.load=function(e){var r=new R.Pipeline;return e.forEach(function(e){var t=R.Pipeline.registeredFunctions[e];if(!t)throw new Error("Cannot load unregistered function: "+e);r.add(t)}),r},R.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){R.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},R.Pipeline.prototype.after=function(e,t){R.Pipeline.warnIfFunctionNotRegistered(t);e=this._stack.indexOf(e);if(-1==e)throw new Error("Cannot find existingFn");e+=1,this._stack.splice(e,0,t)},R.Pipeline.prototype.before=function(e,t){R.Pipeline.warnIfFunctionNotRegistered(t);e=this._stack.indexOf(e);if(-1==e)throw new Error("Cannot find existingFn");this._stack.splice(e,0,t)},R.Pipeline.prototype.remove=function(e){e=this._stack.indexOf(e);-1!=e&&this._stack.splice(e,1)},R.Pipeline.prototype.run=function(i){for(var e=this._stack.length,t=0;t<e;t++){var n=this._stack[t];i=i.reduce(function(e,t,r){r=n(t,r,i);return void 0===r||""===r?e:e.concat(r)},[])}return i},R.Pipeline.prototype.runString=function(e){e=new R.Token(e);return this.run([e]).map(function(e){return e.toString()})},R.Pipeline.prototype.reset=function(){this._stack=[]},R.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return R.Pipeline.warnIfFunctionNotRegistered(e),e.label})},R.Vector=function(e){this._magnitude=0,this.elements=e||[]},R.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];1<i&&(s<e&&(t=n),e<s&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e||e<s?2*n:s<e?2*(n+1):void 0},R.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},R.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},R.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e)},R.Vector.prototype.dot=function(e){for(var t,r,i=0,n=this.elements,s=e.elements,o=n.length,a=s.length,u=0,l=0;u<o&&l<a;)(t=n[u])<(r=s[l])?u+=2:r<t?l+=2:t==r&&(i+=n[u+1]*s[l+1],u+=2,l+=2);return i},R.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},R.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},R.Vector.prototype.toJSON=function(){return this.elements},R.stemmer=(l={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},d={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[aeiouy]",e="[^aeiou][^aeiouy]*",h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),c=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),y=/^(.+?)(ss|i)es$/,m=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,x=/^(.+?)(ed|ing)$/,v=/.$/,w=/(at|bl|iz)$/,k=new RegExp("([^aeiouylsz])\\1$"),Q=new RegExp("^"+e+r+"[^aeiouwxy]$"),L=/^(.+?[^aeiou])y$/,T=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,S=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,b=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,P=/^(.+?)(s|t)(ion)$/,E=/^(.+?)e$/,I=/ll$/,O=new RegExp("^"+e+r+"[^aeiouwxy]$"),function(e){return e.update(i)}),R.Pipeline.registerFunction(R.stemmer,"stemmer"),R.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},R.stopWordFilter=R.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),R.Pipeline.registerFunction(R.stopWordFilter,"stopWordFilter"),R.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},R.Pipeline.registerFunction(R.trimmer,"trimmer"),R.TokenSet=function(){this.final=!1,this.edges={},this.id=R.TokenSet._nextId,R.TokenSet._nextId+=1},R.TokenSet._nextId=1,R.TokenSet.fromArray=function(e){for(var t=new R.TokenSet.Builder,r=0,i=e.length;r<i;r++)t.insert(e[r]);return t.finish(),t.root},R.TokenSet.fromClause=function(e){return"editDistance"in e?R.TokenSet.fromFuzzyString(e.term,e.editDistance):R.TokenSet.fromString(e.term)},R.TokenSet.fromFuzzyString=function(e,t){for(var r=new R.TokenSet,i=[{node:r,editsRemaining:t,str:e}];i.length;){var n,s,o,a,u,l,d,h,c=i.pop();0<c.str.length&&((s=c.str.charAt(0))in c.node.edges?n=c.node.edges[s]:(n=new R.TokenSet,c.node.edges[s]=n),1==c.str.length?n.final=!0:i.push({node:n,editsRemaining:c.editsRemaining,str:c.str.slice(1)})),0<c.editsRemaining&&1<c.str.length&&((s=c.str.charAt(1))in c.node.edges?o=c.node.edges[s]:(o=new R.TokenSet,c.node.edges[s]=o),c.str.length<=2?o.final=!0:i.push({node:o,editsRemaining:c.editsRemaining-1,str:c.str.slice(2)})),0<c.editsRemaining&&1==c.str.length&&(c.node.final=!0),0<c.editsRemaining&&1<=c.str.length&&("*"in c.node.edges?a=c.node.edges["*"]:(a=new R.TokenSet,c.node.edges["*"]=a),1==c.str.length?a.final=!0:i.push({node:a,editsRemaining:c.editsRemaining-1,str:c.str.slice(1)})),0<c.editsRemaining&&("*"in c.node.edges?u=c.node.edges["*"]:(u=new R.TokenSet,c.node.edges["*"]=u),0==c.str.length?u.final=!0:i.push({node:u,editsRemaining:c.editsRemaining-1,str:c.str})),0<c.editsRemaining&&1<c.str.length&&(l=c.str.charAt(0),(d=c.str.charAt(1))in c.node.edges?h=c.node.edges[d]:(h=new R.TokenSet,c.node.edges[d]=h),1==c.str.length?h.final=!0:i.push({node:h,editsRemaining:c.editsRemaining-1,str:l+c.str.slice(2)}))}return r},R.TokenSet.fromString=function(e){for(var t=new R.TokenSet,r=t,i=!1,n=0,s=e.length;n<s;n++){var o,a=e[n],u=n==s-1;"*"==a?(i=!0,(t.edges[a]=t).final=u):((o=new R.TokenSet).final=u,t.edges[a]=o,t=o,i&&(t.edges["*"]=r))}return r},R.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node.final&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},R.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++)var n=t[i],e=e+n+this.edges[n].id;return e},R.TokenSet.prototype.intersect=function(e){for(var t=new R.TokenSet,r=void 0,i=[{qNode:e,output:t,node:this}];i.length;){r=i.pop();for(var n=Object.keys(r.qNode.edges),s=n.length,o=Object.keys(r.node.edges),a=o.length,u=0;u<s;u++)for(var l=n[u],d=0;d<a;d++){var h,c,f,p,y=o[d];y!=l&&"*"!=l||(h=r.node.edges[y],c=r.qNode.edges[l],f=h.final&&c.final,p=void 0,y in r.output.edges?(p=r.output.edges[y]).final=p.final||f:((p=new R.TokenSet).final=f,r.output.edges[y]=p),i.push({qNode:c,output:p,node:h}))}}return t},R.TokenSet.Builder=function(){this.previousWord="",this.root=new R.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},R.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var i=0;i<e.length&&i<this.previousWord.length&&e[i]==this.previousWord[i];i++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(i=r;i<e.length;i++){var n=new R.TokenSet,s=e[i];t.edges[s]=n,this.uncheckedNodes.push({parent:t,char:s,child:n}),t=n}t.final=!0,this.previousWord=e},R.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},R.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;e<=t;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},R.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},R.Index.prototype.search=function(t){return this.query(function(e){new R.QueryParser(t,e).parse()})},R.Index.prototype.query=function(e){var t=new R.Query(this.fields),r=Object.create(null),i=Object.create(null),n=Object.create(null);e.call(t,t);for(var s=0;s<t.clauses.length;s++)for(var o=t.clauses[s],a=null,a=o.usePipeline?this.pipeline.runString(o.term):[o.term],u=0;u<a.length;u++){var l=a[u];o.term=l;for(var d=R.TokenSet.fromClause(o),h=this.tokenSet.intersect(d).toArray(),c=0;c<h.length;c++)for(var f=h[c],p=this.invertedIndex[f],y=p._index,m=0;m<o.fields.length;m++){var g=o.fields[m],x=p[g],v=Object.keys(x),w=f+"/"+g;if(void 0===i[g]&&(i[g]=new R.Vector),i[g].upsert(y,+o.boost,function(e,t){return e+t}),!n[w]){for(var k=0;k<v.length;k++){var Q=v[k],L=new R.FieldRef(Q,g),T=x[Q];void 0===(Q=r[L])?r[L]=new R.MatchData(f,g,T):Q.add(f,l,T)}n[w]=!0}}}for(var S=Object.keys(r),b=[],P=Object.create(null),s=0;s<S.length;s++){var E=R.FieldRef.fromString(S[s]),I=E.docRef,O=this.fieldVectors[E],F=i[E.fieldName].similarity(O);void 0!==(O=P[I])?(O.score+=F,O.matchData.combine(r[E])):(E={ref:I,score:F,matchData:r[E]},P[I]=E,b.push(E))}return b.sort(function(e,t){return t.score-e.score})},R.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:R.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},R.Index.load=function(e){var t={},r={},i=e.fieldVectors,n={},s=e.invertedIndex,o=new R.TokenSet.Builder,a=R.Pipeline.load(e.pipeline);e.version!=R.version&&R.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+R.version+"' does not match serialized index '"+e.version+"'");for(var u=0;u<i.length;u++){var l=(h=i[u])[0],d=h[1];r[l]=new R.Vector(d)}for(u=0;u<s.length;u++){var h,c=(h=s[u])[0],f=h[1];o.insert(c),n[c]=f}return o.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=n,t.tokenSet=o.root,t.pipeline=a,new R.Index(t)},R.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=R.tokenizer,this.pipeline=new R.Pipeline,this.searchPipeline=new R.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},R.Builder.prototype.ref=function(e){this._ref=e},R.Builder.prototype.field=function(e){this._fields.push(e)},R.Builder.prototype.b=function(e){this._b=e<0?0:1<e?1:e},R.Builder.prototype.k1=function(e){this._k1=e},R.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var r=0;r<this._fields.length;r++){var i=this._fields[r],n=e[i],n=this.tokenizer(n),s=this.pipeline.run(n),n=new R.FieldRef(t,i),o=Object.create(null);this.fieldTermFrequencies[n]=o,this.fieldLengths[n]=0,this.fieldLengths[n]+=s.length;for(var a=0;a<s.length;a++){var u=s[a];if(null==o[u]&&(o[u]=0),o[u]+=1,null==this.invertedIndex[u]){var l=Object.create(null);l._index=this.termIndex,this.termIndex+=1;for(var d=0;d<this._fields.length;d++)l[this._fields[d]]=Object.create(null);this.invertedIndex[u]=l}null==this.invertedIndex[u][i][t]&&(this.invertedIndex[u][i][t]=Object.create(null));for(var h=0;h<this.metadataWhitelist.length;h++){var c=this.metadataWhitelist[h],f=u.metadata[c];null==this.invertedIndex[u][i][t][c]&&(this.invertedIndex[u][i][t][c]=[]),this.invertedIndex[u][i][t][c].push(f)}}}},R.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},i={},n=0;n<t;n++){var s=R.FieldRef.fromString(e[n]);i[o=s.fieldName]||(i[o]=0),i[o]+=1,r[o]||(r[o]=0),r[o]+=this.fieldLengths[s]}for(var o,n=0;n<this._fields.length;n++)r[o=this._fields[n]]=r[o]/i[o];this.averageFieldLength=r},R.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,i=Object.create(null),n=0;n<r;n++){for(var s=R.FieldRef.fromString(t[n]),o=s.fieldName,a=this.fieldLengths[s],u=new R.Vector,l=this.fieldTermFrequencies[s],d=Object.keys(l),h=d.length,c=0;c<h;c++){var f,p=d[c],y=l[p],m=this.invertedIndex[p]._index;void 0===i[p]?(f=R.idf(this.invertedIndex[p],this.documentCount),i[p]=f):f=i[p],y=f*((this._k1+1)*y)/(this._k1*(1-this._b+this._b*(a/this.averageFieldLength[o]))+y),y=Math.round(1e3*y)/1e3,u.insert(m,y)}e[s]=u}this.fieldVectors=e},R.Builder.prototype.createTokenSet=function(){this.tokenSet=R.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},R.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new R.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},R.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},R.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},R.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);null==this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);null==this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var u=0;u<a.length;u++){var l=a[u];null==this.metadata[i][o][l]?this.metadata[i][o][l]=e.metadata[i][o][l]:this.metadata[i][o][l]=this.metadata[i][o][l].concat(e.metadata[i][o][l])}}}},R.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(t in this.metadata[e])for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}else this.metadata[e][t]=r},R.Query=function(e){this.clauses=[],this.allFields=e},R.Query.wildcard=new String("*"),R.Query.wildcard.NONE=0,R.Query.wildcard.LEADING=1,R.Query.wildcard.TRAILING=2,R.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=R.Query.wildcard.NONE),e.wildcard&R.Query.wildcard.LEADING&&e.term.charAt(0)!=R.Query.wildcard&&(e.term="*"+e.term),e.wildcard&R.Query.wildcard.TRAILING&&e.term.slice(-1)!=R.Query.wildcard&&(e.term=e.term+"*"),this.clauses.push(e),this},R.Query.prototype.term=function(e,t){t=t||{};return t.term=e,this.clause(t),this},R.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},R.QueryParseError.prototype=new Error,R.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},R.QueryLexer.prototype.run=function(){for(var e=R.QueryLexer.lexText;e;)e=e(this)},R.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},R.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},R.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},R.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return R.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},R.QueryLexer.prototype.width=function(){return this.pos-this.start},R.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},R.QueryLexer.prototype.backup=function(){--this.pos},R.QueryLexer.prototype.acceptDigitRun=function(){for(var e,t;t=(e=this.next()).charCodeAt(0),47<t&&t<58;);e!=R.QueryLexer.EOS&&this.backup()},R.QueryLexer.prototype.more=function(){return this.pos<this.length},R.QueryLexer.EOS="EOS",R.QueryLexer.FIELD="FIELD",R.QueryLexer.TERM="TERM",R.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",R.QueryLexer.BOOST="BOOST",R.QueryLexer.lexField=function(e){return e.backup(),e.emit(R.QueryLexer.FIELD),e.ignore(),R.QueryLexer.lexText},R.QueryLexer.lexTerm=function(e){if(1<e.width()&&(e.backup(),e.emit(R.QueryLexer.TERM)),e.ignore(),e.more())return R.QueryLexer.lexText},R.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(R.QueryLexer.EDIT_DISTANCE),R.QueryLexer.lexText},R.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(R.QueryLexer.BOOST),R.QueryLexer.lexText},R.QueryLexer.lexEOS=function(e){0<e.width()&&e.emit(R.QueryLexer.TERM)},R.QueryLexer.termSeparator=R.tokenizer.separator,R.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==R.QueryLexer.EOS)return R.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return R.QueryLexer.lexField;if("~"==t)return e.backup(),0<e.width()&&e.emit(R.QueryLexer.TERM),R.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),0<e.width()&&e.emit(R.QueryLexer.TERM),R.QueryLexer.lexBoost;if(t.match(R.QueryLexer.termSeparator))return R.QueryLexer.lexTerm}else e.escapeCharacter()}},R.QueryParser=function(e,t){this.lexer=new R.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},R.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=R.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},R.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},R.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},R.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},R.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case R.QueryLexer.FIELD:return R.QueryParser.parseField;case R.QueryLexer.TERM:return R.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+t.type;throw 1<=t.str.length&&(r+=" with value '"+t.str+"'"),new R.QueryParseError(r,t.start,t.end)}},R.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),r="unrecognised field '"+t.str+"', possible fields: "+r;throw new R.QueryParseError(r,t.start,t.end)}e.currentClause.fields=[t.str];e=e.peekLexeme();if(null==e){r="expecting term, found nothing";throw new R.QueryParseError(r,t.start,t.end)}if(e.type===R.QueryLexer.TERM)return R.QueryParser.parseTerm;r="expecting term, found '"+e.type+"'";throw new R.QueryParseError(r,e.start,e.end)}},R.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(null!=r)switch(r.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:var i="Unexpected lexeme type '"+r.type+"'";throw new R.QueryParseError(i,r.start,r.end)}else e.nextClause()}},R.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i="edit distance must be numeric";throw new R.QueryParseError(i,t.start,t.end)}e.currentClause.editDistance=r;var n=e.peekLexeme();if(null!=n)switch(n.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:i="Unexpected lexeme type '"+n.type+"'";throw new R.QueryParseError(i,n.start,n.end)}else e.nextClause()}},R.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var i="boost must be numeric";throw new R.QueryParseError(i,t.start,t.end)}e.currentClause.boost=r;var n=e.peekLexeme();if(null!=n)switch(n.type){case R.QueryLexer.TERM:return e.nextClause(),R.QueryParser.parseTerm;case R.QueryLexer.FIELD:return e.nextClause(),R.QueryParser.parseField;case R.QueryLexer.EDIT_DISTANCE:return R.QueryParser.parseEditDistance;case R.QueryLexer.BOOST:return R.QueryParser.parseBoost;default:i="Unexpected lexeme type '"+n.type+"'";throw new R.QueryParseError(i,n.start,n.end)}else e.nextClause()}},e=this,r=function(){return R},"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=R:e.lunr=R}();

      let tag;
      const main = document.querySelector('main');
      const pages = <%=
        pages.reject{|page| %w{TextSearch TextSearchExpanded}.include?(page.tag)}.map{|page|
          [ page.tag, page.friendly_tag, page.formatted, page.owner, page.user, page.time.split('.')[0] ]
        }.to_json
      %>;

      function render(newTag){
        tag = newTag;
        const page = pages.find(p=>p[0]==tag);
        if(!page) {
          main.innerHTML = `
            <article>
              <header>
                <h2>Page not found</h2>
              </header>
              <section>
                <p>Sorry, that page couldn't be found.</p>
                <p>Perhaps go back to the <a href="#HomePage">HomePage and try again?</p>
              </section>
            </article>
            <footer>
              Igneous Was Here.
            </footer>
          `;
          return;
        }
        main.innerHTML = `
          <article>
            <header>
              <h2>${page[1]}</h2>
            </header>
            <section>
              ${page[2]}
            </section>
          </article>
          <footer>
            Created by ${page[3]}. Updated ${page[5]} by ${page[4]}.
          </footer>
        `;
      }

      function navigate(){
        const hash = window.location.hash.replace(/^#/,'');
        render(hash);
      }
      if(window.location.hash.replace(/^#/,'') == '') window.location.hash = 'HomePage';
      window.addEventListener('hashchange', navigate, false);
      navigate();

      document.querySelector('.random-page').addEventListener('click', (e)=>{
        e.preventDefault();
        const randomId = Math.floor(Math.random() * pages.length);
        document.location.hash = pages[randomId][0];
      });

      // Search index
      var idx = lunr(function () {
        this.ref('tag');
        this.field('tag');
        this.field('body');

        pages.forEach(function(page) { this.add({ tag: page[0], body: page[1]  }); }, this);
      });
      const searchBox = document.getElementById('searchBox');
      function search(){
        const searchTerm = searchBox.value;
        const results = idx.search(searchTerm);
        const resultsHTML = results.map(r => `<li><a href="#${r.ref}">${r.ref}</a></li>`).join('');
        main.innerHTML = `
          <h2>Search: ${searchTerm}</h2>
          <ul>
            ${resultsHTML}
          </ul>
        `
      }
      searchBox.addEventListener('keyup', search);
      searchBox.addEventListener('change', search);
    </script>
  </body>
</html>
